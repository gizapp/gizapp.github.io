'use strict';
let iconTemplate = '<svg width="512" height="512" viewBox="0 0 960 960" style="stroke:none;fill:none;stroke-width:12" xmlns="http://www.w3.org/2000/svg"><rect style="fill:{colorBg}" width="960" height="960" x="0" y="0"/><path d="m1042.0208 541.999c-0.83-22.612-1.13-44.63-3.49-66.962 0-10.261-0.28-20.801-0.87-31.101-0.35-37.516-4.85-74.3-12.06-110.441-10.35-45.445-27.74-90.114-51.68-132.291-13.49-23.795-28.76-46.555-45.97-68.462-17.09-15.065-33.11-30.867-50.5-45.3375-6.92-6.8956-14.27-13.7898-21.59-20.3338-12.22-12.4309-25.04-24.0417-38.36-35.4508-53.86-43.3926-115.79-74.0495-183.14-91.5384-44.75-11.7356-90.79-17.926-137.04-18.2805-26.62 0.7554-54.36 3.197-83 8.6162-18.21 4.1467-36.31 9.018-54.1 14.8825-13.89 3.4608-27.87 7.6345-41.4 12.1669-25.01 6.5498-49.1 14.7949-72.95 24.7366-75.26 35.8706-143.49 90.3823-197.65 163.1678-24.02 32.253-44.14 66.962-60.41 103.212-21.21 54.845-34.85 112.89-38.14 172.661-1.94 19.655-2.82 39.734-2.58 59.644-1.6 26.306-1.05 51.322 1.38 79.811 12.04 88.051 46.73 172.211 100.5 244.416 25.34 33.978 61.59 72.221 98.32 101.62 37.21 25.972 76.56 47.958 118.59 64.459 14.09 6.418 28.65 12.395 43.22 17.577 38.75 15.079 79.22 25.639 120.5 31.479 60.3 9.84 124.56 7.83 191.72-7.48 55.23-12.915 107.73-34.419 156.28-63.506 14.17-10.095 28.18-20.61 41.73-32.785 9.35-8.461 18.52-16.951 27.24-26.224 12.65-10.826 25.1-22.383 36.78-34.408 22.23-19.998 41.16-41.096 61.72-66.573 36.67-49.858 64.24-106.931 81.31-168.28 7.08-25.732 12.3-52.033 15.64-78.995" stroke="{color2}1"/><path d="m1017.7608 534.739c-3.85-22.061-5.57-42.834-9.92-64.09 0-9.426-0.26-19.343-0.8-28.804 1.28-34.932-1.6-69.073-6.24-103.054-8.06-42.293-23.84-84.811-46.88-125.352-12.67-22.327-27.01-43.626-43.4-64.414-18.79-11.533-34.56-25.151-51.86-37.154-6.36-6.334-13.31-12.8237-20.03-18.8351-10.8-12.4349-22.26-23.9602-34.26-35.7299-48.97-42.869-106.56-72.2027-170.97-88.2682-42.4-10.7804-85.74-16.2716-128.97-16.3237-23.91 1.7487-49.16 4.6948-75.15 10.9622-16.38 5.2548-32.77 10.8626-48.84 17.4999-12.76 3.1791-25.84 7.1694-38.27 11.3329-24.26 4.76649-47.36 11.2075-70.76 19.2852-70.38 32.0524-134.35 82.6741-185.15 151.2547-22.42 30.214-41.1 62.762-56.24 96.647-16.75 51.514-27.68 105.46-28.39 161.186-1.79 18.056-2.59 36.735-2.37 55.024-3.23 24.712-4.02 48.004-3.5 74.917 9.65 81.47 41.36 160.304 91.69 228.312 23.63 31.837 57.4 67.475 91.57 94.911 36.37 22.178 73.84 41.281 114.29 54.837 12.94 5.896 26.51 11.542 39.9 16.303 35.2 14.906 72.1 25.583 109.75 32.12 54.73 11.93 114.42 11.373 178.89-2.691 51.75-11.864 100.8-31.734 146.49-58.727 12.51-10.329 25.11-20.769 37.28-33.633 8.39-8.984 16.66-17.72 24.32-27.606 11.62-9.945 23.29-20.678 34.02-31.725 21.75-17.081 39.84-35.758 60.41-57.833 34.86-44.862 61.59-97.837 78.28-155.99 6.78-24.106 11.81-48.774 15.11-74.362" stroke="{color2}2"/><path d="m978.0108 522.839c-8.8-21.157-12.85-39.889-20.48-59.383 0-8.057-0.22-16.952-0.68-25.039 3.95-30.695 3.72-60.506 3.31-90.946-4.31-37.127-17.45-76.119-39.03-113.979-11.31-19.922-24.13-38.824-39.19-57.778-21.56-5.746-36.92-15.782-54.08-23.742-5.44-5.415-11.73-11.24-17.47-16.379-8.46-12.441-17.71-23.826-27.55-36.1871-40.95-42.0109-91.43-69.1759-151.01-82.9082-38.54-9.2148-77.48-13.56-115.75-13.11663-19.46 3.37692-40.63 7.14993-62.29 14.80753-13.37 7.0708-26.96 13.8857-40.21 21.7898-10.91 2.7175-22.5 6.4071-33.13 9.9659-23.04 1.8436-44.53 5.3277-67.17 10.3502-62.4 25.7943-119.37 70.0405-164.68 131.7285-19.79 26.871-36.11 55.878-49.4 85.888-9.43 46.054-15.92 93.281-12.42 142.378-1.52 15.434-2.21 31.818-2.02 47.452-5.9 22.099-8.87 42.566-11.5 66.895 5.74 70.684 32.57 140.788 77.26 201.917 20.83 28.329 50.53 59.698 80.5 83.916 35 15.96 69.4 30.336 107.25 39.066 11.06 5.039 23.01 10.145 34.45 14.214 29.39 14.623 60.45 25.493 92.14 33.171 45.6 15.356 97.81 17.181 157.86 5.159 46.05-10.141 89.44-27.335 130.44-50.896 9.79-10.71 20.07-21.029 29.99-35.022 6.82-9.84 13.61-18.981 19.53-29.87 9.93-8.501 20.33-17.885 29.5-27.327 20.96-12.3 37.68-27.01 58.26-43.509 31.88-36.675 57.24-82.932 73.33-135.846 6.28-21.442 10.99-43.434 14.24-66.77" stroke="{color2}3"/><path d="m929.0908 508.199c-14.88-20.046-21.8-36.267-33.45-53.593 0-6.373-0.17-14.01-0.54-20.407 7.24-25.483 10.26-49.965 15.06-76.049 0.3-30.771-9.59-65.425-29.37-99.987-9.65-16.961-20.59-32.915-34-49.613-24.99 1.375-39.85-4.256-56.83-7.241-4.3-4.283-9.77-9.292-14.32-13.356-5.59-12.45-12.1-23.663-19.28-36.751-31.08-40.955-72.82-65.4514-126.47-76.3132-33.8-7.2887-67.3-10.2239-99.48-9.1709-13.99 5.3801-30.13 10.1704-46.46 19.5384-9.67 9.3052-19.82 17.6057-29.6 27.0677-8.62 2.15-18.4 5.469-26.8 8.284-21.54-1.752-41.04-1.906-62.77-0.643-52.56 18.095-100.94 54.497-139.49 107.705-16.55 22.76-29.96 47.409-40.97 72.651-0.44 39.337-1.46 78.297 7.23 119.239-1.2 12.207-1.75 25.769-1.6 38.135-9.18 18.884-14.84 35.876-21.33 57.025 0.93 57.414 21.74 116.777 59.5 169.443 17.38 24.013 42.08 50.129 66.89 70.388 33.29 8.31 63.92 16.872 98.57 19.663 8.75 3.986 18.7 8.425 27.75 11.644 22.25 14.276 46.11 25.382 70.48 34.465 34.35 19.571 77.36 24.325 131.98 14.816 39.03-8.021 75.46-21.922 110.7-41.26 6.44-11.181 13.87-21.349 21.01-36.732 4.9-10.893 9.86-20.531 13.64-32.656 7.86-6.724 16.68-14.448 23.94-21.916 19.99-6.418 35.02-16.247 55.61-25.886 28.23-26.6 51.9-64.593 67.23-111.062 5.67-18.164 10.01-36.863 13.17-57.428" stroke="{color2}4"/><path d="m873.0908 491.436c-21.86-18.773-32.06-32.119-48.32-46.962 0-4.445-0.12-10.643-0.37-15.104 11-19.515 17.76-37.896 28.51-58.993 5.59-23.493-0.58-53.181-18.3-83.966-7.75-13.571-16.54-26.151-28.07-40.265-28.9 9.528-43.19 8.941-59.97 11.653-3-2.987-7.54-7.062-10.71-9.896-2.3-12.459-5.68-23.474-9.82-37.395-19.79-39.746-51.51-61.188-98.37-68.763-28.36-5.083-55.65-6.404-80.85-4.653-7.72 7.674-18.11 13.629-28.33 24.955-5.44 11.864-11.65 21.864-17.45 33.111-6.02 1.499-13.71 4.396-19.57 6.359-19.81-5.87-37.05-10.189-57.72-13.23-41.3 9.279-79.83 36.7-110.64 80.199-12.85 18.051-22.93 37.711-31.33 57.494 9.85 31.646 15.1 61.142 29.73 92.745-0.84 8.513-1.22 18.843-1.12 27.467-12.93 15.203-21.67 28.216-32.59 45.725-4.58 42.221 9.35 89.286 39.17 132.261 13.43 19.07 32.39 39.172 51.3 54.899 31.35-0.45 57.65 1.455 88.64-2.554 6.1 2.78 13.77 6.458 20.08 8.702 14.06 13.878 29.69 25.254 45.66 35.946 21.5 24.397 53.96 32.506 102.37 25.874 30.99-5.594 59.45-15.724 88.09-30.228 2.61-11.719 6.77-21.715 10.73-38.689 2.69-12.099 5.58-22.307 6.9-35.847 5.48-4.689 12.51-10.511 17.57-15.72 18.88 0.317 31.97-3.924 52.58-5.708 24.05-15.065 45.78-43.595 60.25-82.685 4.97-14.41 8.87-29.34 11.95-46.732" stroke="{color2}5"/><path d="m811.1408 472.895c-29.57-17.366-43.39-27.532-64.75-39.629 0-2.311-0.06-6.917-0.2-9.237 15.17-12.914 26.06-24.548 43.4-40.127 11.43-15.444 9.37-39.637-6.07-66.245-5.64-9.823-12.05-18.669-21.51-29.926-33.23 18.547-46.87 23.54-63.44 32.552-1.55-1.554-5.07-4.594-6.72-6.069 1.34-12.469 1.43-23.265 0.66-38.107-7.3-38.409-27.95-56.471-67.29-60.411-22.35-2.644-42.77-2.179-60.25 0.344-0.79 10.21-4.81 17.454-8.29 30.947-0.75 14.693-2.6 26.574-4 39.795-3.13 0.78-8.51 3.208-11.56 4.229-17.91-10.425-32.63-19.351-52.13-27.152-28.86-0.472-56.5 17.014-78.74 49.773-8.76 12.844-15.15 26.985-20.68 40.729 21.26 23.14 33.43 42.166 54.63 63.44-0.44 4.428-0.64 11.183-0.58 15.668-17.1 11.132-29.24 19.743-45.06 33.226-10.67 25.414-4.35 58.876 16.69 91.132 9.06 13.605 21.69 27.054 34.05 37.768 29.21-10.14 50.72-15.599 77.66-27.128 3.18 1.446 8.32 4.28 11.6 5.447 5.01 13.437 11.52 25.113 18.22 37.585 7.26 29.734 28.06 41.553 69.59 38.104 22.11-2.909 41.75-8.869 63.1-18.025-1.64-12.314-1.09-22.121-0.64-40.854 0.24-13.434 0.82-24.271-0.56-39.375 2.85-2.439 7.89-6.158 10.52-8.867 17.65 7.766 28.61 9.707 49.23 16.611 19.42-2.307 39.01-20.37 52.53-51.297 4.2-10.259 7.6-21.018 10.59-34.901" stroke="{color2}6"/><path fill="{color1}" d="m570 583.12h59.4c111 0 156.6-53.4 156.6-142.8v-41.4c0-90.6-45.6-142.2-156.6-142.2h-89.7l19.98 89.04c18.24 12.96 30.24 26.88 46.08 42.24l2.88-1.92c-3.36-15.36-6.24-29.28-10.56-47.04-3.84-15.84-6.72-24.48-13.44-37.44 9.12-3.36 22.08-5.76 37.92-5.76 31.2 0 39.84 14.4 33.6 51.36-2.88 15.84-6.72 26.4-12 38.88l2.4 1.92c16.32-15.84 29.28-26.88 67.2-55.2 7.2 8.16 11.04 12.96 14.4 18.72 12.96 22.08 10.56 40.32-7.2 47.04-24.48 9.6-39.84 13.92-59.52 19.68v2.88c26.88 9.12 44.64 15.84 82.56 31.68-2.88 10.08-5.76 16.32-9.12 22.08-12.48 22.08-29.76 28.8-44.16 17.28-20.64-16.32-29.28-24.96-45.6-40.8l-2.88 1.44c4.32 16.8 6.24 28.32 8.64 43.2 3.36 20.64 6.72 30.24 12.96 43.2-13.44 3.36-23.52 4.8-36 4.8-34.08 0-42.24-15.84-34.08-51.36 3.36-14.4 6.72-26.4 11.52-39.36l-2.4-1.92c-22.56 19.68-38.88 33.12-65.76 53.76z"/><path fill="{color2}" d="m588 416.8c-28.32-10.08-48-17.76-81.6-31.68 2.4-7.2 4.8-15.36 9.12-22.56 12.96-21.12 28.8-27.84 44.16-16.8 3.7368 2.655 7.212 5.3508 10.512 8.0916V323.248c0-51.072-18.144-73.248-69.216-73.248-12.096 0-25.536 2.016-35.616 6.72V540.976C427.056 594.064 378 619.6 334.992 619.6c-8.736 0-15.456-1.344-21.504-4.704 18.816-110.88 26.88-190.176 26.88-264.096 0-77.952-30.24-100.8-85.344-100.8-16.128 0-28.896 1.344-45.024 6.72 7.392 21.504 10.752 46.368 10.752 73.92v278.88c0 78.624 51.744 124.32 102.144 124.32 50.4 0 107.52-22.176 138.432-112.224h4.032c2.016 97.44 28.896 110.88 71.232 110.88 17.472 0 35.616-2.016 46.368-5.376-8.736-21.504-12.768-43.008-12.768-67.872V479.0476c-9.837 8.0256-20.2542 16.23-33.072 26.073-5.28-5.28-11.04-11.52-15.36-19.2-11.52-20.64-9.6-39.36 7.68-46.56C550.56 430.24 566.4 426.4 588 419.68"/></svg>'
let dynamicManifest = {
  name:'Understandable Passwords',
  short_name:'UPass',
  description:"Understandable password generator!",
  categories:['productivity', 'security'],
  display:'fullscreen',
  orientation:'any',
  start_url:'https://gizapp.github.io/prod/up.html',
}
const manifestElem = document.querySelector("link[rel~='manifest']");
document.addEventListener('themechange', e => {
  dynamicManifest.background_color = rootStyle.getPropertyValue('--colorBg')
  dynamicManifest.theme_color = rootStyle.getPropertyValue('--color1')
  dynamicManifest.icons = [{
    src:processIcon(iconTemplate, e.color, e.darkMode),
    sizes:'512x512',
    type:'image/svg+xml',
    purpose:'any',
  }]
  const blob = new Blob([JSON.stringify(dynamicManifest)], {type: 'application/json'});
  const manifestURL = URL.createObjectURL(blob);
  manifestElem.href = manifestURL
})
